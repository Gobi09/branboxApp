<!DOCTYPE html>
    <!--[if IE 9 ]><html class="ie9"><![endif]-->
<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Material Admin</title>
        
        <!-- Vendor CSS -->
         <link href="assets/vendors/bower_components/sweetalert/dist/sweetalert-override.min.css" rel="stylesheet">
        <link href="assets/vendors/bower_components/animate.css/animate.min.css" rel="stylesheet">
        <link href="assets/vendors/bower_components/material-design-iconic-font/css/material-design-iconic-font.min.css" rel="stylesheet">
            
        <script src="assets/vendors/bower_components/sweetalert/dist/sweetalert.min.js"></script>
        
        <!-- CSS -->
        <link href="assets/css/app.min.1.css" rel="stylesheet">
        <link href="assets/css/app.min.2.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.7/angular.js"></script>
        <script src="lib/ionic/js/angular-ui/angular-ui-router.js"></script>
    </head>
    
    <body class="login-content" id="indexBack">
        <!-- Login -->
        <div class="lc-block toggled" id="l-login">
            <div class="input-group m-b-20">
                <span class="input-group-addon"><i class="md md-person"></i></span>
                <div class="fg-line">
                    <input type="text" class="form-control" id="name" placeholder="Username">
                </div>
            </div>
            
            <div class="input-group m-b-20">
                <span class="input-group-addon"><i class="md md-lock-outline "></i></span>
                <div class="fg-line">
                    <input type="password" class="form-control" id="pass" placeholder="Password">
                </div>
            </div>
            
            <div class="clearfix"></div>
            
            <!-- <div class="checkbox">
                <label>
                    <input type="checkbox" value="">
                    <i class="input-helper"></i>
                    Keep me signed in
                </label>
            </div> -->
            
            <div  class="btn btn-login btn-danger btn-float" id="login"><i class="md md-local-restaurant"></i></div>
            
            <ul class="login-navigation">
                <li class="bgm-red"><a href="mainpage.html#/register" style="color:white;">Register</a></li>
                <li data-block="#l-forget-password" class="bgm-orange">Forgot Password?</li>
                <li class="bgm-green"><a href="mainpage.html#/menu" style="color:white;">Visitors</a></li>
            </ul>
        </div>
        
        <!-- Register -->
        <div class="lc-block" id="l-register"  ng-controller="studentController">
            <div class="input-group m-b-20">
                <span class="input-group-addon"><i class="md md-person"></i></span>
                <div class="fg-line">
                    <input ng-model="username" type="text" class="form-control" placeholder="Username">
                </div>
            </div>
            
            <div class="input-group m-b-20">
                <span class="input-group-addon"><i class="md md-mail"></i></span>
                <div class="fg-line">
                    <input ng-model="emailAddress" type="text" class="form-control" placeholder="Email Address">
                </div>
            </div>
            
            <div class="input-group m-b-20">
                <span class="input-group-addon"><i class="md md-accessibility"></i></span>
                <div class="fg-line">
                    <input ng-model="password" type="password" class="form-control" placeholder="Password">
                </div>
            </div>
            
            <div class="clearfix"></div>
            
            <div class="checkbox">
                <label>
                    <input ng-model="agreement" type="checkbox" value="">
                    <i class="input-helper"></i>
                    Accept the license agreement
                </label>
            </div>
            
            <a data-ng-click="signUp()" class="btn btn-login btn-danger btn-float"><i class="md md-arrow-forward"></i></a>
            
            <ul class="login-navigation">
                <li data-block="#l-login" class="bgm-green">Login</li>
                <li data-block="#l-forget-password" class="bgm-orange">Forgot Password?</li>
            </ul>
        </div>
        
        <!-- Forgot Password -->
        <div class="lc-block" id="l-forget-password">
            <p class="text-left">Enter Your Email Id</p>
            
            <div class="input-group m-b-20">
                <span class="input-group-addon"><i class="md md-email"></i></span>
                <div class="fg-line">
                    <input type="text" class="form-control"  placeholder="Email Address">
                </div>
            </div>
            
            <a href="#" class="btn btn-login btn-danger btn-float"><i class="md md-arrow-forward"></i></a>
            
            <ul class="login-navigation">
                <li data-block="#l-login" class="bgm-green">Login</li>
                <li data-block="#l-register" class="bgm-red">Register</li>
            </ul>
        </div>
        
        <script>
            var mainApp = angular.module("mainApp", []);
            mainApp.controller("studentController", function($scope,$http) {
                
              
                $scope.signUp = function(add){
                    var data = {
                        username:$scope.username,
                        password:$scope.password,
                        emailAddress:$scope.emailAddress
                    }
                    $http.post("http://localhost/myFirstAppServer/myFirstAppCtrl/addUserDetail",data).success(function(data){
                        console.log("inserted Successfully");
                    });
                    $http.get("data.txt").success(function(response){
                        console.log(response);
                    });
                }
            });
        </script>
        <!-- Javascript Libraries -->
        <script src="assets/vendors/bower_components/jquery/dist/jquery.min.js"></script>
        <script src="assets/vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        
        <script src="assets/vendors/bower_components/Waves/dist/waves.min.js"></script>
        
        <!-- Placeholder for IE9 -->
        <!--[if IE 9 ]>
            <script src="assets/vendors/bower_components/jquery-placeholder/jquery.placeholder.min.js"></script>
        <![endif]-->
        
        <script src="assets/js/functions.js"></script>
        
        
    </body>

</html>
<script type="text/javascript">
$("#login").click(function(){

    var name = $("#name").val();
    var pass = $("#pass").val();
     
    var pattern = new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);
     
    if(!pattern.test(name))
    {
         swal({   
                            title: "Please Give Valid Email!! ",   
                            text: "It is Required!",   
                            timer: 2000,   
                            showConfirmButton: false 
                        });
         return false
    }
    //alert(pass);
    if(pass=="")
    {
         swal({   
                            title: "Please Give Password.",   
                            text: " It is Required!",   
                            timer: 2000,   
                            showConfirmButton: false 
                        });
         return false
    }

     $.ajax({
                type: "POST",
                dataType: "json",
                data:{email:name,pass:pass},
                 url:"http://www.appnlogic.com/branboxAppAdmin/branboxAdminUi/ajaxLogin.php?id=1",
                success: function(json){
                     var ajaxlength = json.length;

                    if(!json.error)
                    {
                       var id = json[0]['id'];
                        var email = json[0]['email'];
                        var userName  = json[0]['userName'];
                        var address1 = json[0]['address1'];
                        var address2 = json[0]['address2'];
                        var city = json[0]['city'];
                        var state = json[0]['state'];
                        var country = json[0]['country'];
                        var postalCode = json[0]['postalCode'];
                        localStorage.setItem("email", email);
                        localStorage.setItem("id", id);
                        localStorage.setItem("businessId", 1);
                        localStorage.setItem("userName",userName );
                        localStorage.setItem("address1", address1);
                        localStorage.setItem("address2", address2);
                        localStorage.setItem("city",city );
                        localStorage.setItem("state",state );
                        localStorage.setItem("country", country);
                        localStorage.setItem("postalCode",postalCode );
                        console.log(json[0]['userName']);
                        window.location="mainpage.html#/menu";
                    }
                    else
                    {
                        swal({   
                            title: "Auto close alert!",   
                            text: "I will close in 2 seconds.",   
                            timer: 2000,   
                            showConfirmButton: false 
                        });
                    }

                   
                   //alert();
                },
                });

});
</script>

